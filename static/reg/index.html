<form id="form-reg">
	<legend>Register An Account</legend>
	
	<div class="control-group">
		<label>Username</label>
		<div class="controls">
			<input type="text" name="username">
		</div>
	</div>
	
	<div class="control-group">
		<label>Password</label>
		<div class="controls">
			<input type="password" name="password">
		</div>
	</div>
	<div class="control-group">
		<label>Password Again</label>
		<div class="controls">
			<input type="password" id="input-again">
		</div>
	</div>
	
	<div class="control-group">
		<label>Summary</label>
		<div class="controls">
			<textarea name="summary" rows="4" cols="30"></textarea>
		</div>
	</div>
	
	 <div class="control-group">
		<div class="controls">
			<input type="submit" value="Register">
		</div>
	</div>
</form>

<hr>
<a href="/">Back</a>


<script src="/plug/jquery/jquery.min.js"></script>
<script src="/plug/underscore/underscore-min.js"></script>
<script src="/js/form.js"></script>
<script>
	$(document).ready(function(){
		//form submit
		$('#form-reg').on('submit', function(ev){
			var $form = $(this);
			
			if (! validate()) {
				return false;
			}
			
			$.post('/do_reg', $form.getFormData(), function(reply){
				alert(reply['msg']);
				
				if (reply['ok']) {
					location.href = '/check_user/';
				}
			});
			
			return false;
			
			function validate(){
				var pass = $form.find('[name="password"]').val(),
					pass_again = $form.find('#input-again').val();
				if (pass_again !== pass) {
					alert('Not Match');
					return false;
				}
				return true;
			}
		});
	});
</script>